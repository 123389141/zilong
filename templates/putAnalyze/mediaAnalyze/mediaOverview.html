{% extends "base.html" %}
{% block content %}

<div class="breadcrumbs ace-save-state" id="breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            <a href="/">首页</a>
        </li>
        <li>
            <a href="#">投放分析</a>
        </li>
        <li>
            <a href="#">媒体分析</a>
        </li>
        <li class="active">媒体概览</li>
    </ul><!-- /.breadcrumb -->
</div>
<div class="page-content">

    <script type="text/javascript" src="/static/js/bootstrap-table.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap-table-multiple-sort.js"></script>

    <link rel="stylesheet" href="/static/css/bootstrap-table.css">


    <div class="btn-group">
        <button type="button" class="btn btn-white btn-sm btn-primary">昨日</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">前日</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">近7天</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">近15天</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">近30天</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">历史所有</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">2017-02-01 --- 2017-02-30</button>
    </div>
    <p></p>
    <div class="btn-group">
        <button type="button" class="btn btn-white btn-sm btn-primary">高级筛选</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">iOS ×</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">投放 ×</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">刘浩 ×</button>
        <button type="button" class="btn btn-white btn-sm btn-primary">CPA ×</button>
        清空筛选
    </div>
    <p></p>
    <div id="main-widget-container">

        <div class="col-xs-2 col-sm-2 widget-container-col" id="widget-container-col-2">
            <div class="widget-box " id="widget-box-2">
                <p class="alert alert-info">
                    443,232<br/>
                    2344<br/>
                    新增设备<br/>
                </p>
            </div>
        </div>       <div class="col-xs-2 col-sm-2 widget-container-col" id="widget-container-col-3">
            <div class="widget-box" id="widget-box-3">
                <p class="alert alert-info">
                    443,232<br/>
                    2344<br/>
                    新增设备<br/>
                </p>
            </div>
        </div>

    </div>

    <script>document.write('<table id="table" data-height=' + ($(window).height() - 100) + '>');</script>
    <thead>
    <tr>
        <th data-field="1" data-sortable="true">
            <button class=" btn btn-primary btn-xs">日期　</button>
        </th>
        <th data-field="2" data-sortable="true">
            <button class=" btn btn-primary btn-xs">点击设备</button>
        </th>
        <th data-field="3" data-sortable="true">
            <button class=" btn btn-primary btn-xs">激活设备</button>
        </th>
        <th data-field="4" data-sortable="true">
            <button class=" btn btn-primary btn-xs">新增设备</button>
        </th>
        <th data-field="5" data-sortable="true">
            <button class=" btn btn-primary btn-xs">新增总账号</button>
        </th>
        <th data-field="6" data-sortable="true">
            <button class=" btn btn-primary btn-xs">纯新增账号</button>
        </th>
        <th data-field="7" data-sortable="true">
            <button class=" btn btn-primary btn-xs">回流账号</button>
        </th>
        <th data-field="8" data-sortable="true">
            <button class=" btn btn-primary btn-xs">付费账号</button>
        </th>
        <th data-field="9" data-sortable="true">
            <button class=" btn btn-primary btn-xs">付费率</button>
        </th>
        <th data-field="10" data-sortable="true">
            <button class=" btn btn-primary btn-xs">折后花费</button>
        </th>
        <th data-field="11" data-sortable="true">
            <button class=" btn btn-primary btn-xs">C P A</button>
        </th>
        <th data-field="12" data-sortable="true">
            <button class=" btn btn-primary btn-xs">累计流水</button>
        </th>
        <th data-field="13" data-sortable="true">
            <button class=" btn btn-primary btn-xs">分成比例</button>
        </th>
        <th data-field="14" data-sortable="true">
            <button class=" btn btn-primary btn-xs">+3回收</button>
        </th>
        <th data-field="15" data-sortable="true">
            <button class=" btn btn-primary btn-xs">累计净收入</button>
        </th>
        <th data-field="16" data-sortable="true">
            <button class=" btn btn-primary btn-xs">R O I</button>
        </th>
    </tr>
    </thead>
    <script>document.write('</table>');</script>


</div><!-- /.page-content -->
<script src="/static/ace/js/jquery-ui.custom.min.js"></script><!--拖拽需要的js-->
<script type="text/javascript">
			jQuery(function($) {





				// widget boxes
				// widget box drag & drop example
			    $('.widget-container-col').sortable({
			        connectWith: '.widget-container-col',
					items:'> .widget-box',
					handle: ace.vars['touch'] ? '.widget-title' : false,
					cancel: '.fullscreen',
					opacity:0.8,
					revert:true,
					forceHelperSize:true,
					placeholder: 'widget-placeholder',
					forcePlaceholderSize:true,
					tolerance:'pointer',
					start: function(event, ui) {
						//when an element is moved, it's parent becomes empty with almost zero height.
						//we set a min-height for it to be large enough so that later we can easily drop elements back onto it
						ui.item.parent().css({'min-height':ui.item.height()})
						//ui.sender.css({'min-height':ui.item.height() , 'background-color' : '#F5F5F5'})
					},
					update: function(event, ui) {
						ui.item.parent({'min-height':''})
						//p.style.removeProperty('background-color');


						//save widget positions
						var widget_order = {}
						$('.widget-container-col').each(function() {
							var container_id = $(this).attr('id');
							widget_order[container_id] = []


							$(this).find('> .widget-box').each(function() {
								var widget_id = $(this).attr('id');
								widget_order[container_id].push(widget_id);
								//now we know each container contains which widgets
							});
						});

						ace.data.set('mediaOverview', 'widget-order', widget_order, null, true);
					}
			    });





				//when a widget is shown/hidden/closed, we save its state for later retrieval
				$(document).on('shown.ace.widget hidden.ace.widget closed.ace.widget', '.widget-box', function(event) {
					var widgets = ace.data.get('mediaOverview', 'widget-state', true);
					if(widgets == null) widgets = {}

					var id = $(this).attr('id');
					widgets[id] = event.type;
					ace.data.set('mediaOverview', 'widget-state', widgets, null, true);
				});







				(function() {
					//restore widget order
					var container_list = ace.data.get('mediaOverview', 'widget-order', true);
					if(container_list) {
						for(var container_id in container_list) if(container_list.hasOwnProperty(container_id)) {

							var widgets_inside_container = container_list[container_id];
							if(widgets_inside_container.length == 0) continue;

							for(var i = 0; i < widgets_inside_container.length; i++) {
								var widget = widgets_inside_container[i];
								$('#'+widget).appendTo('#'+container_id);
							}

						}
					}


					//restore widget state
					var widgets = ace.data.get('mediaOverview', 'widget-state', true);
					if(widgets != null) {
						for(var id in widgets) if(widgets.hasOwnProperty(id)) {
							var state = widgets[id];
							var widget = $('#'+id);
							if
							(
								(state == 'shown' && widget.hasClass('collapsed'))
								||
								(state == 'hidden' && !widget.hasClass('collapsed'))
							)
							{
								widget.widget_box('toggleFast');
							}
							else if(state == 'closed') {
								widget.widget_box('closeFast');
							}
						}
					}

					//reset saved positions and states
					$('#reset-widgets').on('click', function() {
						ace.data.remove('mediaOverview', 'widget-state');
						ace.data.remove('mediaOverview', 'widget-order');
						document.location.reload();
					});

				})();

			});


        $("#navbar").hide();
        $("#sidebar").hide();
        setTimeout('$("#footerbar").hide();',3000);

</script>
{% endblock content %}
